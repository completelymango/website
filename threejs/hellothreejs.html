
<html>
<head>
  <title>My first Three.js app</title>
  <style type="text/css">
    body { margin: 0; }
  </style>
</head>

<body>
  <script src="js/three.min.js" type="text/javascript">
  </script>

<script type="text/javascript">

  // Variables
  var camera, scene, renderer, dirLight, hemiLight;
  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera( 65, window.innerWidth / window.innerHeight, 1, 1000 );
  
  // Renderer setup
  renderer = new THREE.WebGLRenderer();
  renderer.setSize( window.innerWidth, window.innerHeight );
  document.body.appendChild( renderer.domElement );

  // Lights
  hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.06 );
  hemiLight.color.setHSL( 0.6, 1, 0.6 );
  hemiLight.position.set( 0, 500, 0 );
  scene.add( hemiLight );

  dirLight = new THREE.DirectionalLight( 0xffffff, 1 );
  dirLight.color.setHSL( 0.1, 1, 0.95 );
  dirLight.position.set( -1, 1.75, 1 );
  dirLight.position.multiplyScalar( 50 );
  scene.add( dirLight );

  dirLight.castShadow = true;
  dirLight.shadowMapWidth = 2048;
  dirLight.shadowMapHeight = 2048;

  // Instantiate a loader
  var loader = new THREE.JSONLoader();

  // Load a resource
  var object;
  loader.load(
    // resource URL
    '/threejs/models/earthdisk.json',
    // Function when resource is loaded
    function ( geometry, materials ) {
      var material = new THREE.MeshLambertMaterial( { color:0xffffff } );
      material = new THREE.MeshPhongMaterial( { color: 0xecc43e, specular: 0xffffff, shininess: 20, shading: THREE.FlatShading } );

      object = new THREE.Mesh( geometry, material );
      object.castShadow = true;
      object.receiveShadow = true;
      scene.add( object );
    }
  );

  camera.position.z = 10;

  function render() {
    requestAnimationFrame( render );

    //TODO: This throws an error in chrome, but I don't know why...
    object.rotation.x += 0.01;
    object.rotation.y += 0.01;
    renderer.render( scene, camera );
  }
  render();

  </script>
</body>
</html>

